---
- name: Generate locale
  ansible.builtin.locale_gen:
    name: en_US.UTF-8
    state: present

- name: Update Timezone to America/New_York
  ansible.builtin.copy:
    content: "America/New_York\n"
    dest: /etc/timezone
    owner: root
    group: root
    mode: "0644"
    backup: true
  notify:
    - update timezone

- name: Set hostname
  ansible.builtin.hostname:
    name: "{{ host_name }}"
  when: host_name != None

- name: Modify Hosts File
  ansible.builtin.lineinfile:
    dest: /etc/hosts
    line: "127.0.0.1    {{ host_name }}"
    owner: pi
    group: sudo
    mode: "0644"

- name: Disable Screen Sleep
  ansible.builtin.lineinfile:
    dest: /etc/lightdm/lightdm.conf
    state: present
    regexp: "#xserver-command=X"
    backrefs: true
    line: "xserver-command=X -s 0 dpms"
  become: true
